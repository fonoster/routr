<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.x.x plugin-docs plugin-id-default docs-doc-id-guides/routr-as-asterisk-frontend">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Routr as Asterisk frontend | Routr Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://routr.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://routr.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://routr.io/docs/1.x.x/guides/routr-as-asterisk-frontend"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.x.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.x.x"><meta data-rh="true" name="docsearch:version" content="1.x.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.x.x"><meta data-rh="true" property="og:title" content="Routr as Asterisk frontend | Routr Docs"><meta data-rh="true" name="description" content="This guide explores the use case of using Asterisk merely as a Media Server and more specialized software, like Routr, to take care of the signaling and resource management. In other words, Asterisk is in charge of the IVR, voice mail, call recording, while Routr deals with connecting Agents, Peers, and Gateways. The following illustration depicts our scenario:"><meta data-rh="true" property="og:description" content="This guide explores the use case of using Asterisk merely as a Media Server and more specialized software, like Routr, to take care of the signaling and resource management. In other words, Asterisk is in charge of the IVR, voice mail, call recording, while Routr deals with connecting Agents, Peers, and Gateways. The following illustration depicts our scenario:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://routr.io/docs/1.x.x/guides/routr-as-asterisk-frontend"><link data-rh="true" rel="alternate" href="https://routr.io/docs/1.x.x/guides/routr-as-asterisk-frontend" hreflang="en"><link data-rh="true" rel="alternate" href="https://routr.io/docs/1.x.x/guides/routr-as-asterisk-frontend" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JX93S6PKN4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JX93S6PKN4",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.247222db.css">
<link rel="preload" href="/assets/js/runtime~main.b5ebe950.js" as="script">
<link rel="preload" href="/assets/js/main.b6f2f3e8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Routr Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Routr Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/1.x.x/welcome">Docs</a><a href="https://fonoster.gumroad.com/l/the-future-of-programmable-sip-servers" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Training<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.x.x/welcome">1.x.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/2.0.0/overview/introduction">2.0.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.x.x/guides/routr-as-asterisk-frontend">1.x.x</a></li></ul></div><a href="https://github.com/fonoster/routr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.x.x/welcome">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.x.x/introduction/overview">Introduction</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.x.x/concepts">Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.x.x/administration/cli/cheatsheet">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.x.x/configuration/agents">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/1.x.x/guides/basic-setup">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.x.x/guides/basic-setup">Basic Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.x.x/guides/routr-as-asterisk-frontend">Routr as Asterisk frontend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.x.x/guides/running-on-kubernetes">Running on Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.x.x/guides/running-with-docker-or-compose">Running with Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.x.x/guides/securing-the-signaling-path">Securing the signaling path</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.x.x/api/overview">API Docs</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Routr Docs<!-- --> <b>1.x.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/2.0.0/overview/introduction">latest version</a></b> (<!-- -->2.0.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Routr as Asterisk frontend</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.x.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Routr as Asterisk frontend</h1><p>This guide explores the use case of using Asterisk merely as a Media Server and more specialized software, like Routr, to take care of the signaling and resource management. In other words, Asterisk is in charge of the IVR, voice mail, call recording, while Routr deals with connecting Agents, Peers, and Gateways. The following illustration depicts our scenario:</p><img loading="lazy" src="/img/peering_ilustration.png" width="600" vspace="50" class="img_ev3q"><p><strong>Content</strong></p><ul><li><a href="#requirements">Requirements</a></li><li><a href="#configuration-overview">Configuration Overview</a></li><li><a href="#configuring-asterisk">Configuring Asterisk</a></li><li><a href="#calling-asterisk-from-johns-device">Calling Asterisk from John’s device</a></li><li><a href="#whats-next">What’s Next?</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2><p>This tutorial assumes the following:</p><ul><li>You have a SIP phone connected to the same LAN as Routr and Asterisk</li><li>If using a hardware phone, this can reach Asterisk and Routr and the other way around</li><li>You have a fresh installation of Routr and Asterisk</li></ul><blockquote><p>Before starting this guide make sure to have a fresh installation of <strong>Routr</strong> server.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-overview">Configuration Overview<a href="#configuration-overview" class="hash-link" aria-label="Direct link to Configuration Overview" title="Direct link to Configuration Overview">​</a></h2><p>With a fresh installation of <strong>Routr</strong>, you have most of the configuration you need to follow this tutorial. We, however, need to make some minor changes to configuration files to run our scenario.</p><p>The first file we need to examine and change is <code>config/peers.yml</code>. Make a note of the username and secret for the Peer &quot;ast&quot; since we are using this to configure Asterisk. Also, search for the field <code>spec.device</code> and change it to match the Agents domain(<code>sip.local</code>). The file now looks similar to this:</p><p><code>config/peers.yml</code></p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Peer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Asterisk PBX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;sip.local&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">credentials</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1234&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Head to the console and run the command <code>rctl -- get peers</code> to confirm that the Peer exist. The result should be as follows:</p><img loading="lazy" src="/img/get_peers_cmd_output.png" width="600" class="img_ev3q"><p>Next, we focus our attention on <code>domains.yml</code> and <code>agents.yml</code>. With a fresh installation, we don&#x27;t need to make any changes to these files. However, you could run the commands <code>get domains</code> and <code>get agents</code> to ensure that both, the Agent and the Domain, exist on the server. Your output should look similar to:</p><img loading="lazy" src="/img/get_domains_and_agents.png" width="600" class="img_ev3q"><p>Use the information in <code>agents.yml</code> to configure your SIP phone. The relevant information is found in <code>spec.credentials</code>. Mine looks like this:</p><img loading="lazy" src="/img/john_telephone_setup_general.png" width="500" class="img_ev3q"><img loading="lazy" src="/img/john_telephone_setup_advanced.png" width="500" class="img_ev3q"><blockquote><p>Make the adjustments based on your prefer SIP phone.</p></blockquote><p>You can verify that your device registered correctly with <strong>Routr</strong> by running the <code>locate</code> command:</p><img loading="lazy" src="/img/locate_john.png" width="600" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-asterisk">Configuring Asterisk<a href="#configuring-asterisk" class="hash-link" aria-label="Direct link to Configuring Asterisk" title="Direct link to Configuring Asterisk">​</a></h2><p><strong>Using PJSIP</strong></p><p>Backup your <code>pjsip.conf</code> and <code>pjsip_wizard.conf</code>. Update your pjsip.conf with the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[transport-tcp]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type=transport</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protocol=tcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bind=0.0.0.0:6060</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, in your pjsip_wizard.conf:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[routr]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type = wizard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sends_auth = yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sends_registrations = yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote_hosts = 192.168.1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbound_auth/username = ast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbound_auth/password = 1234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registration/retry_interval = 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registration/expiration = 900</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endpoint/allow = ulaw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endpoint/allow = alaw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endpoint/allow = opus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endpoint/context = default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transport = transport-tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Using the &quot;old&quot; Chan SIP</strong></p><p>First backup your <code>sip.conf</code>. Then, replace your configuration and edit the file to reflect the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[general]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udpbindaddr=0.0.0.0:6060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context=default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">register =&gt; ast:1234@192.168.1.2:5060/1001    ; This information must match the credentials in `config/peers.yml`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Configuring the Dialplan</strong></p><p>We are going to use a very simple dialplan to play a sound file. Again, make a backup of your configuration and replace its content with this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[default]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exten =&gt; 1001,1,Answer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exten =&gt; 1001,n,Playback(tt-monkeys)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exten =&gt; 1001,n,Hangup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Restart your Asterisk and check the location service. A new device now appears.</p><img loading="lazy" src="/img/locate_john_and_ast.png" width="600" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="calling-asterisk-from-johns-device">Calling Asterisk from John&#x27;s device<a href="#calling-asterisk-from-johns-device" class="hash-link" aria-label="Direct link to Calling Asterisk from John&#x27;s device" title="Direct link to Calling Asterisk from John&#x27;s device">​</a></h2><p>We can now call <code>ast@sip.local</code> and if everything went well listen to a group of really annoying monkeys :).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s Next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s Next?" title="Direct link to What&#x27;s Next?">​</a></h2><p>You can check out the <a href="https://github.com/fonoster../wiki/Home" target="_blank" rel="noopener noreferrer">wiki</a> to see more examples. If you have any questions start an issue or contact us via:</p><ul><li>Twitter: <a href="https://twitter.com/fonoster" target="_blank" rel="noopener noreferrer">@fonoster</a></li><li>Email: <a href="mailto:fonosterteam@fonoster.com" target="_blank" rel="noopener noreferrer">fonosterteam@fonoster.com</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fonoster/routr-website/edit/main/versioned_docs/version-1.x.x/guides/routr-as-asterisk-frontend.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.x.x/guides/basic-setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Basic Setup</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.x.x/guides/running-on-kubernetes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running on Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#configuration-overview" class="table-of-contents__link toc-highlight">Configuration Overview</a></li><li><a href="#configuring-asterisk" class="table-of-contents__link toc-highlight">Configuring Asterisk</a></li><li><a href="#calling-asterisk-from-johns-device" class="table-of-contents__link toc-highlight">Calling Asterisk from John&#39;s device</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s Next?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Quick Links</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/2.0.0/overview/introduction">Docs</a></li><li class="footer__item"><a href="https://fonoster.gumroad.com/l/the-future-of-programmable-sip-servers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Training<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/fonoster/routr/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/4QWgSz4hTC" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/fonoster" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://learn.fonoster.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/fonoster/routr" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Fonoster, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b5ebe950.js"></script>
<script src="/assets/js/main.b6f2f3e8.js"></script>
</body>
</html>