"use strict";(self.webpackChunkroutr_docs=self.webpackChunkroutr_docs||[]).push([[537],{4348:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"api/overview","title":"overview","description":"Routr API version is currently v1beta1. We continue to improve the API, resource definition, and other artifacts until we reach a final version. We can then establish a policy to ensure backward compatibility. Until then keep an eye on this document.","source":"@site/versioned_docs/version-1.x.x/api/overview.md","sourceDirName":"api","slug":"/api/overview","permalink":"/docs/1.x.x/api/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/fonoster/routr-website/edit/main/versioned_docs/version-1.x.x/api/overview.md","tags":[],"version":"1.x.x","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Securing the signaling path","permalink":"/docs/1.x.x/guides/securing-the-signaling-path"},"next":{"title":"createAgent","permalink":"/docs/1.x.x/api/agents/create"}}');var i=n(4848),r=n(8453);const o={},a=void 0,c={},d=[{value:"Authentication",id:"authentication",level:2},{value:"Error Responses",id:"error-responses",level:2}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Routr API version is currently ",(0,i.jsx)(t.code,{children:"v1beta1"}),". We continue to improve the API, resource definition, and other artifacts until we reach a final version. We can then establish a policy to ensure backward compatibility. Until then keep an eye on this document."]}),"\n",(0,i.jsx)(t.p,{children:"The endpoint for the API is:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"/api/{apiversion}"})}),"\n",(0,i.jsx)(t.h2,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsxs)(t.p,{children:["A JWT token is used to authenticate the server. To obtain the token, use the ",(0,i.jsx)(t.code,{children:"/api/{apiversion}/token"})," endpoint with basic authentication. Use the information from the ",(0,i.jsx)(t.a,{href:"/docs/1.x.x/configuration/users",children:"User"})," resource."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["You must append the ",(0,i.jsx)(t.code,{children:"token"})," to all requests as a query parameter."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Sample call"})}),"\n",(0,i.jsx)(t.p,{children:"To obtain the token"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'curl -k -u "admin:changeit" https://localhost:4567/api/v1beta1/token\n\n# Resulted in\n{\n    "status":200,\n    "message":"Successful request",\n    "data":"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiJ9.TZZ4kp5xIdYzs5RRt6_qVxJcOiLdk1IEHFMBSZ7SRENx6kyVhwfAlm-oeM4L2XFIr4evlTCxKEIKc0fZKwPcjw"\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"To use the token"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'curl -k -u "admin:changeit" https://localhost:4567/api/v1beta1/location?token=eyJhbGciOiJIUzUxMiJ9.e...\n\n# Resulted in\n{  \n   "status":200,\n   "message":"Successful request",\n   "data":[  \n      {  \n         "addressOfRecord":"sip:1001@sip.local",\n         "contactInfo":"sip:45962087@192.168.1.127:61147;transport=tcp;nat=false;expires=600"\n      }\n   ]\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsx)(t.p,{children:"The following are general errors we might have to account for:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Code"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Content"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"400 BAD_REQUEST"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:'{ status: "400", message : "Bad Request" }'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"401 UNAUTHORIZED"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:'{ status: "401", message : "You are unauthorized to make this request." }'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"405 NOT_SUPPORTED"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:'{ status: "405", message : "Operation not supported by data source provider" }'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"409 CONFLICT"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:'{ status: "409", message : "An attempt was made to create an object that already exists" }'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"4091 UNFULFILLED_DEPENDENCY_RESPONSE"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:'{ status: "4091", message : "Found one or more unfulfilled dependencies" }'})})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(6540);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);