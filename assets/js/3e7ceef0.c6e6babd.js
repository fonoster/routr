"use strict";(self.webpackChunkroutr_docs=self.webpackChunkroutr_docs||[]).push([[5613],{7156:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>c,toc:()=>o});var t=s(4848),d=s(8453);const n={},i="General",c={id:"configuration/general",title:"General",description:"The general configuration affects your entire Routr instance. The general configuration",source:"@site/versioned_docs/version-1.x.x/configuration/general.md",sourceDirName:"configuration",slug:"/configuration/general",permalink:"/docs/1.x.x/configuration/general",draft:!1,unlisted:!1,editUrl:"https://github.com/fonoster/routr-website/edit/main/versioned_docs/version-1.x.x/configuration/general.md",tags:[],version:"1.x.x",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Gateways",permalink:"/docs/1.x.x/configuration/gateways"},next:{title:"Numbers",permalink:"/docs/1.x.x/configuration/numbers"}},l={},o=[{value:"General Configuration Parameters",id:"general-configuration-parameters",level:2},{value:"Transport Configuration",id:"transport-configuration",level:2},{value:"Datasource Providers",id:"datasource-providers",level:2},{value:"Redis Data Provider",id:"redis-data-provider",level:3},{value:"Files Data Provider",id:"files-data-provider",level:3},{value:"Configuring the server behind a NAT",id:"configuring-the-server-behind-a-nat",level:2},{value:"Access Control List",id:"access-control-list",level:2},{value:"Basic Example",id:"basic-example",level:2}];function a(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"general",children:"General"}),"\n",(0,t.jsxs)(r.p,{children:["The general configuration affects your entire Routr instance. The general configuration\ncan be provided using the file ",(0,t.jsx)(r.code,{children:"config/config.yml"})," located at the root of your Routr installation."]}),"\n",(0,t.jsx)(r.h2,{id:"general-configuration-parameters",children:"General Configuration Parameters"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Property"}),(0,t.jsx)(r.th,{children:"Description"}),(0,t.jsx)(r.th,{children:"Required"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"apiVersion"}),(0,t.jsx)(r.td,{children:"Indicates the version of the resource (Not yet implemented)"}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"metadata.userAgent"}),(0,t.jsxs)(r.td,{children:["Sets sip header ",(0,t.jsx)(r.code,{children:"User-Agent"})," to the desired value"]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.dataSource.provider"}),(0,t.jsxs)(r.td,{children:["Defines data provider. Defaults to ",(0,t.jsx)(r.code,{children:"files_data_provider"})]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.dataSource.parameters"}),(0,t.jsx)(r.td,{children:"Data Source Parameters. Ex.: 'host=localhost,port=6379'"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.bindAddr"}),(0,t.jsx)(r.td,{children:"Default stack IP address"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.externAddr"}),(0,t.jsx)(r.td,{children:"IP address to advertise"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.localnets"}),(0,t.jsx)(r.td,{children:"Local networks. Use in combination with spec.externAddr"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.recordRoute"}),(0,t.jsx)(r.td,{children:"Stay within the signaling path"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.transport.[*].bindAddr"}),(0,t.jsxs)(r.td,{children:["Overwrites ",(0,t.jsx)(r.code,{children:"spec.bindAddr"})," for transport entry"]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.transport.[*].port"}),(0,t.jsx)(r.td,{children:"Transport port"}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.transport.[*].protocol"}),(0,t.jsxs)(r.td,{children:["Valid values are: ",(0,t.jsx)(r.code,{children:"tcp"}),", ",(0,t.jsx)(r.code,{children:"udp"}),", ",(0,t.jsx)(r.code,{children:"tls"}),", ",(0,t.jsx)(r.code,{children:"sctp"}),", ",(0,t.jsx)(r.code,{children:"ws"}),", ",(0,t.jsx)(r.code,{children:"wss"})]}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.registrarIntf"}),(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"Internal"}),' causes the server to use the IP and port it "sees"(received & rport) from a device attempting to register. Defaults to ',(0,t.jsx)(r.code,{children:"External"})]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.accessControlList.deny.[*]"}),(0,t.jsx)(r.td,{children:"Deny incoming traffic from network list"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.accessControlList.allow.[*]"}),(0,t.jsx)(r.td,{children:"Allow incoming traffic from network list"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.bindAddr"}),(0,t.jsx)(r.td,{children:"Restful service listening address"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.port"}),(0,t.jsx)(r.td,{children:"Restful service port. Defaults to 4567"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.minThreads"}),(0,t.jsx)(r.td,{children:"Minimum thread allocation. Defaults to 8"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.maxThreads"}),(0,t.jsx)(r.td,{children:"Maximum thread allocation. Defaults to 200"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.timeOutMillis"}),(0,t.jsx)(r.td,{children:"Will reject requests that last more than this value. Defaults to 5000(5 seconds)"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.unsecured"}),(0,t.jsxs)(r.td,{children:["Disabled https for restful calls. Defaults to ",(0,t.jsx)(r.code,{children:"false"})]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.keyStore"}),(0,t.jsx)(r.td,{children:"Path to keyStore"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.trueStore"}),(0,t.jsx)(r.td,{children:"Path to trueStore"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.keyStorePassword"}),(0,t.jsx)(r.td,{children:"Password for keyStore"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.restService.trueStorePassword"}),(0,t.jsx)(r.td,{children:"Password for trueStore"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.securityContext.keyStore"}),(0,t.jsx)(r.td,{children:"Path to keyStore"}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.securityContext.trustStore"}),(0,t.jsx)(r.td,{children:"Path to trueStore"}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.securityContext.keyStorePassword"}),(0,t.jsx)(r.td,{children:"Password for keyStore"}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.securityContext.keyStoreType"}),(0,t.jsx)(r.td,{children:"KeyStore type"}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.securityContext.client.authType"}),(0,t.jsxs)(r.td,{children:["Type of client authentication. Defaults to ",(0,t.jsx)(r.code,{children:"DisabledAll"}),". See ",(0,t.jsx)(r.a,{href:"https://goo.gl/1vKbXW",children:"https://goo.gl/1vKbXW"})," for more options"]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.securityContext.client.protocols.[*]"}),(0,t.jsxs)(r.td,{children:["Accepted TLS protocols. Defaults to [",(0,t.jsx)(r.code,{children:"TLSv1.2"}),"]"]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.securityContext.debugging"}),(0,t.jsxs)(r.td,{children:["Turns ON or OFF ssl debugging. Defaults to ",(0,t.jsx)(r.code,{children:"false"})]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.ex_rtpEngine.enabled"}),(0,t.jsxs)(r.td,{children:["If enabled, it will send all media thru the RTPEngine. Defaults to ",(0,t.jsx)(r.code,{children:"false"})]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.ex_rtpEngine.proto"}),(0,t.jsxs)(r.td,{children:["Reserved to allow for NG commands via ",(0,t.jsx)(r.code,{children:"http"}),", ",(0,t.jsx)(r.code,{children:"https"}),", and ",(0,t.jsx)(r.code,{children:"udp"}),". Currently only ",(0,t.jsx)(r.code,{children:"http"})," is supported"]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.ex_rtpEngine.host"}),(0,t.jsx)(r.td,{children:"Address for RTPEngine"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.ex_rtpEngine.port"}),(0,t.jsx)(r.td,{children:"Port for RTPEngine"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.ex_convertTelToE164"}),(0,t.jsxs)(r.td,{children:["If enabled, it will convert the number on ingress calls to ",(0,t.jsx)(r.code,{children:"E164"})," format before routing the call. Defaults to ",(0,t.jsx)(r.code,{children:"false"})]}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"spec.ex_uniqueGatewayPerHostPort"}),(0,t.jsxs)(r.td,{children:["If enabled, it will yield an error if a Gateway with the same host and port combination already exists. Defaults to ",(0,t.jsx)(r.code,{children:"false"})]}),(0,t.jsx)(r.td,{children:"No"})]})]})]}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:["Variables prefixed with ",(0,t.jsx)(r.code,{children:"ex_"})," are experimental features and may be removed or renamed in the future."]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"transport-configuration",children:"Transport Configuration"}),"\n",(0,t.jsxs)(r.p,{children:["Routr supports ",(0,t.jsx)(r.code,{children:"tcp"}),", ",(0,t.jsx)(r.code,{children:"udp"}),", ",(0,t.jsx)(r.code,{children:"tls"}),", ",(0,t.jsx)(r.code,{children:"sctp"}),", ",(0,t.jsx)(r.code,{children:"ws"}),", and ",(0,t.jsx)(r.code,{children:"wss"})," as transport protocols."]}),"\n",(0,t.jsxs)(r.p,{children:["The server requires at least one transport protocol.\nTo bind a transport protocol to a specific IP address, you can use the ",(0,t.jsx)(r.code,{children:"spec.transport.bindAddr"})," or more generally ",(0,t.jsx)(r.code,{children:"spec.bindAddr"}),"."]}),"\n",(0,t.jsx)(r.h2,{id:"datasource-providers",children:"Datasource Providers"}),"\n",(0,t.jsxs)(r.p,{children:["Routr currently implements two data providers: ",(0,t.jsx)(r.code,{children:"redis_data_provider"})," and ",(0,t.jsx)(r.code,{children:"files_data_provider"}),". The default data provider is the ",(0,t.jsx)(r.code,{children:"files_data_provider"}),"."]}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:["The docker distribution of the server uses ",(0,t.jsx)(r.code,{children:"redis_data_provider"})," by default"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"redis-data-provider",children:"Redis Data Provider"}),"\n",(0,t.jsxs)(r.p,{children:["The parameters for ",(0,t.jsx)(r.code,{children:"redis_data_provider"})," are:"]}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Description"}),(0,t.jsx)(r.th,{children:"Required"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"host"}),(0,t.jsx)(r.td,{children:"Redis host. Defaults to 'localhost'"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"port"}),(0,t.jsx)(r.td,{children:"Redis port. The default port is 6379"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"secret"}),(0,t.jsx)(r.td,{children:"Password to access database"}),(0,t.jsx)(r.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"files-data-provider",children:"Files Data Provider"}),"\n",(0,t.jsxs)(r.p,{children:["The parameters for ",(0,t.jsx)(r.code,{children:"files_data_provider"})," are:"]}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Description"}),(0,t.jsx)(r.th,{children:"Required"})]})}),(0,t.jsx)(r.tbody,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"path"}),(0,t.jsxs)(r.td,{children:["Path to configuration files. Defaults to the ",(0,t.jsx)(r.code,{children:"config"})," folder"]}),(0,t.jsx)(r.td,{children:"No"})]})})]}),"\n",(0,t.jsx)(r.p,{children:"This implementation has the limitation that writes operations have to be performed manually on the files."}),"\n",(0,t.jsx)(r.h2,{id:"configuring-the-server-behind-a-nat",children:"Configuring the server behind a NAT"}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"spec.externAddr"})," and ",(0,t.jsx)(r.code,{children:"spec.localnets"})," parameters help Routr identify the\ncorrect path for any given traffic. The ",(0,t.jsx)(r.code,{children:"spec.externAddr"})," is typically the Internet\nfacing IP address. The ",(0,t.jsx)(r.code,{children:"spec.localnets"})," is an array with valid CIDR, IP/Mask, or single IP values.\nHere is quick example:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:"spec:\n  externAddr: 172.220.231.23\n  localnets: [172.17.0.2/16]\n"})}),"\n",(0,t.jsx)(r.h2,{id:"access-control-list",children:"Access Control List"}),"\n",(0,t.jsxs)(r.p,{children:["The Access Control List(ACL) provides with a security mechanism to disable network\naccess from unwanted sources. ACL rules exist at general or Domain level. Here is an example,\nblocking all traffic except from IP address ",(0,t.jsx)(r.code,{children:"192.168.0.1"}),"."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:"spec:\n  accessControlList:\n    deny: [0.0.0.0/1]        # Deny all\n    allow: [192.168.0.1/31]\n"})}),"\n",(0,t.jsx)(r.h2,{id:"basic-example",children:"Basic Example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-yaml",children:"apiVersion: v1beta1\nspec:\n  transport:\n    - protocol: tcp\n      port: 5060\n    - protocol: udp\n      port: 5060\n"})})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>c});var t=s(6540);const d={},n=t.createContext(d);function i(e){const r=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),t.createElement(n.Provider,{value:r},e.children)}}}]);