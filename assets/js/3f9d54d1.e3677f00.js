"use strict";(self.webpackChunkroutr_docs=self.webpackChunkroutr_docs||[]).push([[8076],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>h});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),d=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=d(e.components);return n.createElement(c.Provider,{value:t},e.children)},l="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),l=d(r),m=o,h=l["".concat(c,".").concat(m)]||l[m]||p[m]||a;return r?n.createElement(h,i(i({ref:t},u),{},{components:r})):n.createElement(h,i({ref:t},u))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[l]="string"==typeof e?e:o,i[1]=s;for(var d=2;d<a;d++)i[d]=r[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},7882:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var n=r(7462),o=(r(7294),r(3905));const a={},i="Custom data with the APIServer",s={unversionedId:"development/custom-data-with-the-apiserver",id:"development/custom-data-with-the-apiserver",title:"Custom data with the APIServer",description:"Whether you run the Routr Connect distribution or build a custom Processor, you can store custom data with the APIServer.",source:"@site/docs/development/custom-data-with-the-apiserver.md",sourceDirName:"development",slug:"/development/custom-data-with-the-apiserver",permalink:"/docs/2.0.0/development/custom-data-with-the-apiserver",draft:!1,editUrl:"https://github.com/fonoster/routr-website/edit/main/docs/development/custom-data-with-the-apiserver.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Building a Middleware",permalink:"/docs/2.0.0/development/building-a-middleware"},next:{title:"Extending the Command-Line Tool",permalink:"/docs/2.0.0/development/extending-the-ctl"}},c={},d=[{value:"When to store custom data",id:"when-to-store-custom-data",level:2},{value:"How to store custom data",id:"how-to-store-custom-data",level:2},{value:"How to retrieve custom data",id:"how-to-retrieve-custom-data",level:2}],u={toc:d},l="wrapper";function p(e){let{components:t,...r}=e;return(0,o.kt)(l,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"custom-data-with-the-apiserver"},"Custom data with the APIServer"),(0,o.kt)("p",null,"Whether you run the Routr Connect distribution or build a custom Processor, you can store custom data with the APIServer."),(0,o.kt)("p",null,"The APIServer, typically used for Routr Connect, consists of objects with an ",(0,o.kt)("inlineCode",{parentName:"p"},"extended")," property to store custom data. This ",(0,o.kt)("inlineCode",{parentName:"p"},"extended")," property is a JSON object you can use to store any data you want."),(0,o.kt)("h2",{id:"when-to-store-custom-data"},"When to store custom data"),(0,o.kt)("p",null,"Store custom data when you need information not part of the standard object. For instance, you might need to store an external identifier for an object, such as keeping the external identifier of a user in your external system."),(0,o.kt)("p",null,"You might also need to store information a Processor requires, like the ",(0,o.kt)("inlineCode",{parentName:"p"},"User-Agent")," of a device an Agent uses, and use that information to adjust the signaling process."),(0,o.kt)("h2",{id:"how-to-store-custom-data"},"How to store custom data"),(0,o.kt)("p",null,"To store custom data, add a property to the ",(0,o.kt)("inlineCode",{parentName:"p"},"extended")," object. For instance, to add the external identifier of an Agent in your external system, do the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const request = {\n  name: "John Doe",\n  username: "jdoe",\n  privacy: Privacy.PRIVATE,\n  domainRef: "4671371b-ff5d-48b1-aabe-d3c5ca5317a3",\n  credentialsRef: "4671371b-ff5d-48b1-aabe-d3c5ca5317a3",\n  enabled: true,\n  extended: {\n    "externalId": "123456789"\n  }\n};\n\nagents.createAgent(request)\n  .then(console.log)\n  .catch(console.error); // an error occurred\n')),(0,o.kt)("p",null,"For additional examples of how to store custom data, see the ",(0,o.kt)("a",{parentName:"p",href:"/docs/2.0.0/connect/nodesdk/sdk"},"Node SDK"),' and search for "extended."'),(0,o.kt)("h2",{id:"how-to-retrieve-custom-data"},"How to retrieve custom data"),(0,o.kt)("p",null,"To retrieve custom data, read the ",(0,o.kt)("inlineCode",{parentName:"p"},"extended")," property. For instance, to retrieve the external identifier of a user in your external system, do the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'agents.getAgent("8571371b-6f5d-78b1-aabe-93c5c75317a3")\n  .then(agent => {\n    console.log(agent.extended.externalId);\n  })\n  .catch(console.error); // an error occurred\n')))}p.isMDXComponent=!0}}]);